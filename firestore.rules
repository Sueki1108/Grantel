/**
 * @fileOverview Firestore Security Rules for Spreadsheet Data Management.
 *
 * Core Philosophy:
 * This ruleset allows public read and write access to spreadsheet data and checked row states.
 * This is appropriate for prototyping and explicitly permitted by the design document.
 *
 * Data Structure:
 * - /sheetData: Stores the uploaded spreadsheet data.
 * - /checkedRows: Stores the checked state of rows in the spreadsheet.
 *
 * Key Security Decisions:
 * - Public Read/Write: All users, including unauthenticated users, can read and write all data.
 *   This simplifies initial prototyping but should be restricted for production.
 */
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    /**
     * @description Allows public read access (get, list) to the /sheetData collection.
     * @path /sheetData
     * @allow (get, list) Access to /sheetData is public.
     * @deny (create, update, delete) No specific restrictions, but typically writes would be limited in a real application.
     * @principle Allows anyone to read the sheet data.
     */
    match /sheetData/{sheetDataId} {
      allow get, list: if true;
      allow create, update, delete: if true;
    }

    /**
     * @description Allows public read access (get, list) to the /checkedRows collection.
     * @path /checkedRows
     * @allow (get, list) Access to /checkedRows is public.
     * @deny (create, update, delete) No specific restrictions, but typically writes would be limited in a real application.
     * @principle Allows anyone to read the checked rows.
     */
    match /checkedRows/{checkedRowId} {
      allow get, list: if true;
      allow create, update, delete: if true;
    }
  }
}